{"mappings":"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","sources":["<anon>","src/main.ts","src/constants.ts","src/utils.ts"],"sourcesContent":["const $19d416a1dabe61c4$export$6fb729463a74e23 = 'https://www.npmjs.com/package';\nconst $19d416a1dabe61c4$var$NPM_REGISTRY_URL = 'https://registry.npmjs.com';\nconst $19d416a1dabe61c4$export$2e74004b635d08aa = `https://corsmirror.com/v1?url=${$19d416a1dabe61c4$var$NPM_REGISTRY_URL}`;\nconst $19d416a1dabe61c4$export$a3c4df769e264cca = 300;\n\n\n/**\n * Adds class to DOM element.\n *\n * @param element - The element.\n * @param className - The class.\n * @returns - The element.\n */ function $d526951eb107ee9b$export$d2cf6cd1dc7067d3(element, className) {\n    if (element.className.indexOf(className) === -1) element.className += ' ' + className;\n    return element;\n}\nfunction $d526951eb107ee9b$export$c2255604a80b4506(element, className) {\n    if (element.className.indexOf(className) > -1) element.className = element.className.replace(className, '').trim();\n    return element;\n}\nfunction $d526951eb107ee9b$export$a41c68a4eb5ff164(element, property, value) {\n    if (!element) throw new Error('The first argument must be an element');\n    /* eslint-disable @typescript-eslint/ban-ts-comment */ // @ts-ignore\n    if (element[property] !== value) // @ts-ignore\n    element[property] = value;\n    /* eslint-enable @typescript-eslint/ban-ts-comment */ return element;\n}\nfunction $d526951eb107ee9b$export$307fb6e7cd9f153f(packageName) {\n    if (/^[a-zA-Z0-9_-]+$/.test(packageName)) return packageName[0] !== '_';\n    return false;\n}\nfunction $d526951eb107ee9b$export$8c7c179b1e9895e(element, type) {\n    switch(type){\n        case 'error':\n            $d526951eb107ee9b$export$c2255604a80b4506(element, 'green');\n            $d526951eb107ee9b$export$d2cf6cd1dc7067d3(element, 'red');\n            $d526951eb107ee9b$export$a41c68a4eb5ff164(element, 'textContent', 'cancel');\n            break;\n        case 'success':\n            $d526951eb107ee9b$export$c2255604a80b4506(element, 'red');\n            $d526951eb107ee9b$export$d2cf6cd1dc7067d3(element, 'green');\n            $d526951eb107ee9b$export$a41c68a4eb5ff164(element, 'textContent', 'check_circle');\n            break;\n        case 'broken':\n            $d526951eb107ee9b$export$c2255604a80b4506(element, 'green');\n            $d526951eb107ee9b$export$d2cf6cd1dc7067d3(element, 'red');\n            $d526951eb107ee9b$export$a41c68a4eb5ff164(element, 'textContent', 'report_problem');\n            break;\n        default:\n            $d526951eb107ee9b$export$c2255604a80b4506(element, 'red');\n            $d526951eb107ee9b$export$c2255604a80b4506(element, 'green');\n            $d526951eb107ee9b$export$a41c68a4eb5ff164(element, 'textContent', 'search');\n            break;\n    }\n}\nlet $d526951eb107ee9b$var$timeout;\nfunction $d526951eb107ee9b$export$61fc7d43ac8f84b0(callback, delay) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return function(...args) {\n        clearTimeout($d526951eb107ee9b$var$timeout);\n        $d526951eb107ee9b$var$timeout = setTimeout(()=>{\n            callback.apply(this, args);\n        }, delay);\n    };\n}\n\n\n// cache DOM nodes\nconst $04177131cda29cd1$var$inputElement = document.getElementById('npc-package-name');\n/* eslint-disable @typescript-eslint/no-non-null-assertion */ const $04177131cda29cd1$var$loadingElement = document.getElementById('npc-loading');\nconst $04177131cda29cd1$var$resultTextElement = document.getElementById('npc-result-text');\nconst $04177131cda29cd1$var$resultIconElement = document.getElementById('npc-result-icon');\n/* eslint-enable @typescript-eslint/no-non-null-assertion */ // store input value\nlet $04177131cda29cd1$var$inputValue;\n// check name when it is typed (with a debounce)\n$04177131cda29cd1$var$inputElement.addEventListener('keyup', $04177131cda29cd1$var$onKeyup, false);\n/**\n * Handles `keyup` event.\n *\n * @param event - The event handler.\n */ function $04177131cda29cd1$var$onKeyup() {\n    const packageName = $04177131cda29cd1$var$inputElement.value.toLowerCase();\n    // blank input\n    if (!packageName) {\n        (0, $d526951eb107ee9b$export$c2255604a80b4506)($04177131cda29cd1$var$loadingElement, 'is-active');\n        (0, $d526951eb107ee9b$export$a41c68a4eb5ff164)($04177131cda29cd1$var$resultTextElement, 'textContent', '');\n        (0, $d526951eb107ee9b$export$8c7c179b1e9895e)($04177131cda29cd1$var$resultIconElement, 'default');\n        $04177131cda29cd1$var$inputValue = '';\n        return;\n    }\n    // check whether input has changed\n    if (packageName === $04177131cda29cd1$var$inputValue) return;\n    else $04177131cda29cd1$var$inputValue = packageName;\n    // invalid package name\n    if (!(0, $d526951eb107ee9b$export$307fb6e7cd9f153f)(packageName)) {\n        (0, $d526951eb107ee9b$export$c2255604a80b4506)($04177131cda29cd1$var$loadingElement, 'is-active');\n        (0, $d526951eb107ee9b$export$a41c68a4eb5ff164)($04177131cda29cd1$var$resultTextElement, 'textContent', 'Invalid name.');\n        (0, $d526951eb107ee9b$export$8c7c179b1e9895e)($04177131cda29cd1$var$resultIconElement, 'error');\n        return;\n    }\n    // clear result and display loading spinner\n    (0, $d526951eb107ee9b$export$a41c68a4eb5ff164)($04177131cda29cd1$var$resultTextElement, 'textContent', '');\n    (0, $d526951eb107ee9b$export$a41c68a4eb5ff164)($04177131cda29cd1$var$resultIconElement, 'textContent', '');\n    (0, $d526951eb107ee9b$export$d2cf6cd1dc7067d3)($04177131cda29cd1$var$loadingElement, 'is-active');\n    (0, $d526951eb107ee9b$export$61fc7d43ac8f84b0)(async ()=>{\n        let response;\n        let data;\n        try {\n            response = await fetch(`${(0, $19d416a1dabe61c4$export$2e74004b635d08aa)}/${encodeURIComponent(packageName)}`, {\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            data = await response.json();\n            // package name is taken\n            (0, $d526951eb107ee9b$export$a41c68a4eb5ff164)($04177131cda29cd1$var$resultTextElement, 'textContent', 'Name is taken.');\n            (0, $d526951eb107ee9b$export$a41c68a4eb5ff164)($04177131cda29cd1$var$resultTextElement, 'href', `${(0, $19d416a1dabe61c4$export$6fb729463a74e23)}/${packageName}`);\n            (0, $d526951eb107ee9b$export$a41c68a4eb5ff164)($04177131cda29cd1$var$resultTextElement, 'target', '_blank');\n            (0, $d526951eb107ee9b$export$d2cf6cd1dc7067d3)($04177131cda29cd1$var$resultTextElement, 'hover');\n            (0, $d526951eb107ee9b$export$8c7c179b1e9895e)($04177131cda29cd1$var$resultIconElement, 'error');\n        } catch (error) {\n            if (error.status >= 500) {\n                (0, $d526951eb107ee9b$export$a41c68a4eb5ff164)($04177131cda29cd1$var$resultTextElement, 'textContent', 'Server error.');\n                (0, $d526951eb107ee9b$export$8c7c179b1e9895e)($04177131cda29cd1$var$resultIconElement, 'broken');\n                // eslint-disable-next-line no-console\n                console.error(error);\n            }\n        }\n        // remove loading spinner\n        (0, $d526951eb107ee9b$export$c2255604a80b4506)($04177131cda29cd1$var$loadingElement, 'is-active');\n        // package is available or unpublished\n        if (response?.status === 404 || data?.time?.unpublished) {\n            (0, $d526951eb107ee9b$export$a41c68a4eb5ff164)($04177131cda29cd1$var$resultTextElement, 'textContent', 'Name is available.');\n            (0, $d526951eb107ee9b$export$8c7c179b1e9895e)($04177131cda29cd1$var$resultIconElement, 'success');\n            (0, $d526951eb107ee9b$export$a41c68a4eb5ff164)($04177131cda29cd1$var$resultTextElement, 'href', '#');\n            (0, $d526951eb107ee9b$export$a41c68a4eb5ff164)($04177131cda29cd1$var$resultTextElement, 'target', '');\n            (0, $d526951eb107ee9b$export$c2255604a80b4506)($04177131cda29cd1$var$resultTextElement, 'hover');\n        }\n    }, (0, $19d416a1dabe61c4$export$a3c4df769e264cca))();\n}\n\n\n//# sourceMappingURL=npm-package-name-checker.6bc6f528.js.map\n","import {\n  DEBOUNCE_DELAY_IN_MILLISECONDS,\n  NPM_PACKAGE_URL,\n  REQUEST_URL,\n} from './constants';\nimport {\n  addClass,\n  debounce,\n  isValidPackageName,\n  removeClass,\n  setProperty,\n  setResultIcon,\n} from './utils';\n\n// cache DOM nodes\nconst inputElement = document.getElementById(\n  'npc-package-name',\n) as HTMLInputElement;\n\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nconst loadingElement = document.getElementById('npc-loading')!;\nconst resultTextElement = document.getElementById('npc-result-text')!;\nconst resultIconElement = document.getElementById('npc-result-icon')!;\n/* eslint-enable @typescript-eslint/no-non-null-assertion */\n\n// store input value\nlet inputValue: string;\n\n// check name when it is typed (with a debounce)\ninputElement.addEventListener('keyup', onKeyup, false);\n\n/**\n * Handles `keyup` event.\n *\n * @param event - The event handler.\n */\nfunction onKeyup(): void {\n  const packageName = inputElement.value.toLowerCase();\n\n  // blank input\n  if (!packageName) {\n    removeClass(loadingElement, 'is-active');\n    setProperty(resultTextElement, 'textContent', '');\n    setResultIcon(resultIconElement, 'default');\n    inputValue = '';\n    return;\n  }\n\n  // check whether input has changed\n  if (packageName === inputValue) {\n    return;\n  } else {\n    inputValue = packageName;\n  }\n\n  // invalid package name\n  if (!isValidPackageName(packageName)) {\n    removeClass(loadingElement, 'is-active');\n    setProperty(resultTextElement, 'textContent', 'Invalid name.');\n    setResultIcon(resultIconElement, 'error');\n    return;\n  }\n\n  // clear result and display loading spinner\n  setProperty(resultTextElement, 'textContent', '');\n  setProperty(resultIconElement, 'textContent', '');\n  addClass(loadingElement, 'is-active');\n\n  debounce(async () => {\n    let response;\n    let data;\n\n    try {\n      response = await fetch(\n        `${REQUEST_URL}/${encodeURIComponent(packageName)}`,\n        {\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        },\n      );\n      data = await response.json();\n\n      // package name is taken\n      setProperty(resultTextElement, 'textContent', 'Name is taken.');\n      setProperty(\n        resultTextElement,\n        'href',\n        `${NPM_PACKAGE_URL}/${packageName}`,\n      );\n      setProperty(resultTextElement, 'target', '_blank');\n      addClass(resultTextElement, 'hover');\n      setResultIcon(resultIconElement, 'error');\n    } catch (error) {\n      if (error.status >= 500) {\n        setProperty(resultTextElement, 'textContent', 'Server error.');\n        setResultIcon(resultIconElement, 'broken');\n        // eslint-disable-next-line no-console\n        console.error(error);\n      }\n    }\n\n    // remove loading spinner\n    removeClass(loadingElement, 'is-active');\n\n    // package is available or unpublished\n    if (response?.status === 404 || data?.time?.unpublished) {\n      setProperty(resultTextElement, 'textContent', 'Name is available.');\n      setResultIcon(resultIconElement, 'success');\n      setProperty(resultTextElement, 'href', '#');\n      setProperty(resultTextElement, 'target', '');\n      removeClass(resultTextElement, 'hover');\n    }\n  }, DEBOUNCE_DELAY_IN_MILLISECONDS)();\n}\n","export const NPM_PACKAGE_URL = 'https://www.npmjs.com/package';\nconst NPM_REGISTRY_URL = 'https://registry.npmjs.com';\nexport const REQUEST_URL = `https://corsmirror.com/v1?url=${NPM_REGISTRY_URL}`;\nexport const DEBOUNCE_DELAY_IN_MILLISECONDS = 300;\n","/**\n * Adds class to DOM element.\n *\n * @param element - The element.\n * @param className - The class.\n * @returns - The element.\n */\nexport function addClass(element: HTMLElement, className: string) {\n  if (element.className.indexOf(className) === -1) {\n    element.className += ' ' + className;\n  }\n  return element;\n}\n\n/**\n * Removes class from DOM element.\n *\n * @param element - The element.\n * @param className - The class.\n * @returns - The element.\n */\nexport function removeClass(element: HTMLElement, className: string) {\n  if (element.className.indexOf(className) > -1) {\n    element.className = element.className.replace(className, '').trim();\n  }\n  return element;\n}\n\n/**\n * Sets property for DOM element.\n *\n * @param element - The element.\n * @param property - The property.\n * @param value - The value.\n * @returns - The element.\n */\nexport function setProperty(\n  element: HTMLElement,\n  property: keyof HTMLElement | keyof HTMLAnchorElement,\n  value: string,\n) {\n  if (!element) {\n    throw new Error('The first argument must be an element');\n  }\n\n  /* eslint-disable @typescript-eslint/ban-ts-comment */\n  // @ts-ignore\n  if (element[property] !== value) {\n    // @ts-ignore\n    element[property] = value;\n  }\n  /* eslint-enable @typescript-eslint/ban-ts-comment */\n\n  return element;\n}\n\n/**\n * Check if npm package name is valid.\n *\n * https://github.com/npm/validate-npm-package-name#naming-rules\n *\n * @param packageName - The package name.\n */\nexport function isValidPackageName(packageName: string): boolean {\n  if (/^[a-zA-Z0-9_-]+$/.test(packageName)) {\n    return packageName[0] !== '_';\n  }\n  return false;\n}\n\n/**\n * Changes result icon display type (success, error, default).\n *\n * @param element - The element.\n * @param type - The display type.\n */\nexport function setResultIcon(element: HTMLElement, type: string): void {\n  switch (type) {\n    case 'error':\n      removeClass(element, 'green');\n      addClass(element, 'red');\n      setProperty(element, 'textContent', 'cancel');\n      break;\n\n    case 'success':\n      removeClass(element, 'red');\n      addClass(element, 'green');\n      setProperty(element, 'textContent', 'check_circle');\n      break;\n\n    case 'broken':\n      removeClass(element, 'green');\n      addClass(element, 'red');\n      setProperty(element, 'textContent', 'report_problem');\n      break;\n\n    default:\n      removeClass(element, 'red');\n      removeClass(element, 'green');\n      setProperty(element, 'textContent', 'search');\n      break;\n  }\n}\n\nlet timeout: ReturnType<typeof setTimeout>;\n\n/**\n * Debounces a function call.\n *\n * https://remysharp.com/2010/07/21/throttling-function-calls\n *\n * @param callback - The function to debounce.\n * @param delay - The delay in milliseconds.\n * @returns - The debounced function.\n */\nexport function debounce(callback: () => void, delay?: number) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return function (...args: any[]) {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      callback.apply(this, args);\n    }, delay);\n  };\n}\n"],"names":["$d526951eb107ee9b$var$timeout","$04177131cda29cd1$var$inputValue","$d526951eb107ee9b$export$d2cf6cd1dc7067d3","element","className","indexOf","$d526951eb107ee9b$export$c2255604a80b4506","replace","trim","$d526951eb107ee9b$export$a41c68a4eb5ff164","property","value","Error","$d526951eb107ee9b$export$8c7c179b1e9895e","type","$04177131cda29cd1$var$inputElement","document","getElementById","$04177131cda29cd1$var$loadingElement","$04177131cda29cd1$var$resultTextElement","$04177131cda29cd1$var$resultIconElement","addEventListener","callback","packageName","toLowerCase","test","response","data","fetch","encodeURIComponent","headers","json","error","status","console","time","unpublished","args","clearTimeout","setTimeout","apply"],"version":3,"file":"npm-package-name-checker.6bc6f528.js.map"}